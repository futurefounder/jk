<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>🔨Slow Webflow Site Because Of A Embedded Youtube Video? Here&#39;s Your Fix | Jesse Khala I Web Development I Marketing</title>
<meta name="keywords" content="" />
<meta name="description" content="Have you embedded a youtube video via iframe in your Webflow site and suddenly your page speed is super slow? Especially on mobile?
Worry no more, here’s how you can fix it.
Setup Lets first look at the iframe you are embedding in Webflow
&lt;iframe  width=&#34;768&#34;  height=&#34;396&#34;  src=&#34;https://www.youtube.com/embed/QYAwFBGb-5U&#34;  rel=&#34;0&#34;  enablejsapi=&#34;1&#34;  frameborder=&#34;0&#34;  allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34; &gt;&lt;/iframe&gt; Problem The problem with this code is, that the video content of the iframe is loaded directly with the whole page.">
<meta name="author" content="">
<link rel="canonical" href="https://jessekhala.com/posts/webflow-embed-youtube-video-slow-sitepeed-fix/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.3af331c91fd4232e5a9f712bc17add06c6434574448c96592dea044152dd3812.css" integrity="sha256-OvMxyR/UIy5an3ErwXrdBsZDRXREjJZZLeoEQVLdOBI=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js" integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://i.ibb.co/qRfGHnn/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://i.ibb.co/yggS38R/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co/P9n9GX4/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jessekhala.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://jessekhala.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.93.3" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.birds.min.js"></script>
<script type="text/javascript">
  window.addEventListener("DOMContentLoaded", () => {
    VANTA.BIRDS({
      el: "#vantajs",
      mouseControls: true,
      touchControls: true,
      gyroControls: false,
      minHeight: 200.0,
      minWidth: 200.0,
      scale: 1.0,
      scaleMobile: 1.0,
      color1: 0xf27070,
      color2: 0xbe61f0,
      birdSize: 1.8,
      wingSpan: 40.0,
      speedLimit: 3.0,
      separation: 21.0,
      alignment: 21.0,
      cohesion: 32.0,
      quantity: 1.0,
      backgroundAlpha: 0.0,
    });
  });
</script>
<script
  async
  defer
  data-domain="jessekhala.com"
  src="https://plausible.io/js/plausible.js"
></script>
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
<meta
  name="google-site-verification"
  content="2Gprz7qje9is31jCdOIbFpdsBnId3rCUsgvnTexyF10"
/><meta property="og:title" content="🔨Slow Webflow Site Because Of A Embedded Youtube Video? Here&#39;s Your Fix" />
<meta property="og:description" content="Have you embedded a youtube video via iframe in your Webflow site and suddenly your page speed is super slow? Especially on mobile?
Worry no more, here’s how you can fix it.
Setup Lets first look at the iframe you are embedding in Webflow
&lt;iframe  width=&#34;768&#34;  height=&#34;396&#34;  src=&#34;https://www.youtube.com/embed/QYAwFBGb-5U&#34;  rel=&#34;0&#34;  enablejsapi=&#34;1&#34;  frameborder=&#34;0&#34;  allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34; &gt;&lt;/iframe&gt; Problem The problem with this code is, that the video content of the iframe is loaded directly with the whole page." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jessekhala.com/posts/webflow-embed-youtube-video-slow-sitepeed-fix/" /><meta property="og:image" content="https://jessekhala.com/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-01T15:45:32&#43;02:00" />
<meta property="article:modified_time" content="2022-10-01T15:45:32&#43;02:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jessekhala.com/papermod-cover.png"/>

<meta name="twitter:title" content="🔨Slow Webflow Site Because Of A Embedded Youtube Video? Here&#39;s Your Fix"/>
<meta name="twitter:description" content="Have you embedded a youtube video via iframe in your Webflow site and suddenly your page speed is super slow? Especially on mobile?
Worry no more, here’s how you can fix it.
Setup Lets first look at the iframe you are embedding in Webflow
&lt;iframe  width=&#34;768&#34;  height=&#34;396&#34;  src=&#34;https://www.youtube.com/embed/QYAwFBGb-5U&#34;  rel=&#34;0&#34;  enablejsapi=&#34;1&#34;  frameborder=&#34;0&#34;  allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34; &gt;&lt;/iframe&gt; Problem The problem with this code is, that the video content of the iframe is loaded directly with the whole page."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://jessekhala.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "🔨Slow Webflow Site Because Of A Embedded Youtube Video? Here's Your Fix",
      "item": "https://jessekhala.com/posts/webflow-embed-youtube-video-slow-sitepeed-fix/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "🔨Slow Webflow Site Because Of A Embedded Youtube Video? Here's Your Fix",
  "name": "🔨Slow Webflow Site Because Of A Embedded Youtube Video? Here\u0027s Your Fix",
  "description": "Have you embedded a youtube video via iframe in your Webflow site and suddenly your page speed is super slow? Especially on mobile?\nWorry no more, here’s how you can fix it.\nSetup Lets first look at the iframe you are embedding in Webflow\n\u0026lt;iframe  width=\u0026#34;768\u0026#34;  height=\u0026#34;396\u0026#34;  src=\u0026#34;https://www.youtube.com/embed/QYAwFBGb-5U\u0026#34;  rel=\u0026#34;0\u0026#34;  enablejsapi=\u0026#34;1\u0026#34;  frameborder=\u0026#34;0\u0026#34;  allow=\u0026#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\u0026#34; \u0026gt;\u0026lt;/iframe\u0026gt; Problem The problem with this code is, that the video content of the iframe is loaded directly with the whole page.",
  "keywords": [
    
  ],
  "articleBody": "Have you embedded a youtube video via iframe in your Webflow site and suddenly your page speed is super slow? Especially on mobile?\nWorry no more, here’s how you can fix it.\nSetup Lets first look at the iframe you are embedding in Webflow\niframe  width=\"768\"  height=\"396\"  src=\"https://www.youtube.com/embed/QYAwFBGb-5U\"  rel=\"0\"  enablejsapi=\"1\"  frameborder=\"0\"  allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" iframe Problem The problem with this code is, that the video content of the iframe is loaded directly with the whole page. As the youtube video embed needs additional JavaScript resources, this leads to a slower page speed.\nWhat you can do You need to use a code snipped and adjust your iframe slightly. With this solution the iframe loads a blank page and then only fetches the Youtube Video, when the user clicks a link or a button.\nNew embed with an id and new properties.\niframe  id=\"embedVideo\"  width=\"768\"  height=\"396\"  data-src=\"https://www.youtube.com/embed/QYAwFBGb-5U\"  src=\"about:blank\"  rel=\"0\"  enablejsapi=\"1\"  frameborder=\"0\"  allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" iframe jQuery Code Snippet you have to add. Your link or button must have the same id as the code snippet, in this case #start-video\nscript  $(document).ready(function() {  $(\"#start-video\").click(function(){  var iframe = $(\"#embedVideo\");  iframe.attr(\"src\", iframe.data(\"src\"));  });  });  script \nThat's it! Now the youtube iframe will only load when the user clicks. Want to join my freelance ride? Feel free to add me on   Linkedin \n",
  "wordCount" : "221",
  "inLanguage": "en",
  "datePublished": "2022-10-01T15:45:32+02:00",
  "dateModified": "2022-10-01T15:45:32+02:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jessekhala.com/posts/webflow-embed-youtube-video-slow-sitepeed-fix/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Jesse Khala I Web Development I Marketing",
    "logo": {
      "@type": "ImageObject",
      "url": "https://i.ibb.co/qRfGHnn/favicon-96x96.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            
           <a href="/">👨🏾‍💻 Jesse Khala</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu" onscroll="menu_on_scroll()">
            <li>
                 
                <a href="https://jessekhala.com/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                 
                <a href="https://jessekhala.com/sports/" title="Sports">
                    <span>Sports</span>
                </a>
            </li>
            <li>
                 
                <a href="https://jessekhala.com/projects/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                 
                <a href="https://jessekhala.com/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                 
                <a href="https://jessekhala.com/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://jessekhala.com/">Home</a>&nbsp;»&nbsp;<a href="https://jessekhala.com/posts/">Posts</a></div>
    <h1 class="post-title">
      🔨Slow Webflow Site Because Of A Embedded Youtube Video? Here&#39;s Your Fix
    </h1>
    <div class="post-meta">October 1, 2022
</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">Table of Contents</div>
        </summary>
        <div class="inner"><ul>
                <li>
                    <a href="#setup" aria-label="Setup"><strong>Setup</strong></a></li>
                <li>
                    <a href="#problem" aria-label="Problem">Problem</a></li>
                <li>
                    <a href="#what-you-can-do" aria-label="What you can do">What you can do</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Have you embedded a youtube video via iframe in your Webflow site and suddenly your page speed is super slow?
Especially on mobile?</p>
<p>Worry no more, here’s how you can fix it.</p>
<h1 id="setup"><strong>Setup</strong><a hidden class="anchor" aria-hidden="true" href="#setup">#</a></h1>
<p>Lets first look at the iframe you are embedding in Webflow</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span>&lt;<span style="color:#f92672">iframe</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;768&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;396&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://www.youtube.com/embed/QYAwFBGb-5U&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">enablejsapi</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">frameborder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">allow</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34;</span>
</span></span><span style="display:flex;"><span>&gt;&lt;/<span style="color:#f92672">iframe</span>&gt;
</span></span></code></pre></div><h1 id="problem">Problem<a hidden class="anchor" aria-hidden="true" href="#problem">#</a></h1>
<p>The problem with this code is, that the video content of the iframe is loaded directly with the whole page. As the youtube video embed needs additional JavaScript resources, this leads to a slower page speed.</p>
<h1 id="what-you-can-do">What you can do<a hidden class="anchor" aria-hidden="true" href="#what-you-can-do">#</a></h1>
<p>You need to use a code snipped and adjust your iframe slightly. With this solution the iframe loads a blank page and then only fetches the Youtube Video, when the user clicks a link or a button.</p>
<p>New embed with an id and new properties.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span>&lt;<span style="color:#f92672">iframe</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;embedVideo&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;768&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;396&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">data</span><span style="color:#960050;background-color:#1e0010">-</span><span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://www.youtube.com/embed/QYAwFBGb-5U&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;about:blank&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">enablejsapi</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">frameborder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">allow</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34;</span>
</span></span><span style="display:flex;"><span>&gt;&lt;/<span style="color:#f92672">iframe</span>&gt;
</span></span></code></pre></div><p>jQuery Code Snippet you have to add. Your link or button must have the same id as the code snippet, in this case #start-video</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">$</span>(document).<span style="color:#a6e22e">ready</span>(<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#34;#start-video&#34;</span>).<span style="color:#a6e22e">click</span>(<span style="color:#66d9ef">function</span>(){
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">iframe</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#34;#embedVideo&#34;</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">iframe</span>.<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#34;src&#34;</span>, <span style="color:#a6e22e">iframe</span>.<span style="color:#a6e22e">data</span>(<span style="color:#e6db74">&#34;src&#34;</span>));
</span></span><span style="display:flex;"><span>     });
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><br>
That's it!
Now the youtube iframe will only load when the user clicks.
<br>



<br>
<i>Want to join my freelance ride? <br>Feel free to add me on </i>
<br>
<a href="https://linkedin.com/in/hi-jesse/" >
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">  
<path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
</svg> Linkedin </a><br>


</div>
  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="https://jessekhala.com/posts/understanding-react/">
    <span class="title">« Prev Page</span>
    <br>
    <span>👀 Understanding ReactJS</span>
  </a>
  <a class="next" href="https://jessekhala.com/posts/restart/">
    <span class="title">Next Page »</span>
    <br>
    <span>🔁 Restart</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    <footer class="footer">
    <span>&copy; 2023 <a href="https://jessekhala.com/">Jesse Khala I Web Development I Marketing</a></span> <br>
    
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> & <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a> </span>
    
    <span>&middot;</span> 
    <span> <a href="\imprint" rel="noopener" >Imprint</a></span>
    
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>
  </script> 
          <script>
            var typed = new Typed('#typed', {
              stringsElement: '#typed-strings',
              typeSpeed: 130
            });
          </script>

<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
